<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>A NER Model for Command Line Help Messages (Part 1: The command line program) | Agus site</title><meta name=keywords content="NLP,NER,spaCy,Python,rich"><meta name=description content="In this 3 part series I will tell the journey of creating a program to detect the different components/entities of a command line program&rsquo;s help message. This post will start by looking at the final product helpner, a python program that can be installed from PyPI, the second will tell about the spaCy NLP workflow and finally we will take a look at the data that feeds spaCy&rsquo;s final model."><meta name=author content><link rel=canonical href=https://plaguss.github.io/blog/a-ner-model-for-command-line-help-messages-part1/><link crossorigin=anonymous href=/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://plaguss.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://plaguss.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://plaguss.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://plaguss.github.io/apple-touch-icon.png><link rel=mask-icon href=https://plaguss.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://plaguss.github.io/blog/a-ner-model-for-command-line-help-messages-part1/><link rel=alternate hreflang=es href=https://plaguss.github.io/es/blog/a-ner-model-for-command-line-help-messages-part1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="A NER Model for Command Line Help Messages (Part 1: The command line program)"><meta property="og:description" content="In this 3 part series I will tell the journey of creating a program to detect the different components/entities of a command line program&rsquo;s help message. This post will start by looking at the final product helpner, a python program that can be installed from PyPI, the second will tell about the spaCy NLP workflow and finally we will take a look at the data that feeds spaCy&rsquo;s final model."><meta property="og:type" content="article"><meta property="og:url" content="https://plaguss.github.io/blog/a-ner-model-for-command-line-help-messages-part1/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-02-21T18:55:27+01:00"><meta property="article:modified_time" content="2023-02-21T18:55:27+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="A NER Model for Command Line Help Messages (Part 1: The command line program)"><meta name=twitter:description content="In this 3 part series I will tell the journey of creating a program to detect the different components/entities of a command line program&rsquo;s help message. This post will start by looking at the final product helpner, a python program that can be installed from PyPI, the second will tell about the spaCy NLP workflow and finally we will take a look at the data that feeds spaCy&rsquo;s final model."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://plaguss.github.io/blog/"},{"@type":"ListItem","position":2,"name":"A NER Model for Command Line Help Messages (Part 1: The command line program)","item":"https://plaguss.github.io/blog/a-ner-model-for-command-line-help-messages-part1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"A NER Model for Command Line Help Messages (Part 1: The command line program)","name":"A NER Model for Command Line Help Messages (Part 1: The command line program)","description":"In this 3 part series I will tell the journey of creating a program to detect the different components/entities of a command line program\u0026rsquo;s help message. This post will start by looking at the final product helpner, a python program that can be installed from PyPI, the second will tell about the spaCy NLP workflow and finally we will take a look at the data that feeds spaCy\u0026rsquo;s final model.","keywords":["NLP","NER","spaCy","Python","rich"],"articleBody":"In this 3 part series I will tell the journey of creating a program to detect the different components/entities of a command line program‚Äôs help message. This post will start by looking at the final product helpner, a python program that can be installed from PyPI, the second will tell about the spaCy NLP workflow and finally we will take a look at the data that feeds spaCy‚Äôs final model.\nThe post assumes some python knowledge, like how to install a library from PyPI, and some familiarity with spaCy.\nThe following figure shows the architecture of helpner, each piece is represented by a different github repository. Highlighted in yellow at the bottom its the piece corresponding to helpner.\nWhat led me to start this project? I wanted an NLP project to put into practice the spaCy facilities. If possible, the model should be ready to use by an end user without developing a website for it for simplicity. Independently, I found docopt by chance exploring python CLI libraries. As it turns out, this library, and its maintained fork (docopt-ng) can generate a CLI program by parsing a ‚Äúproperly written‚Äù help message (visit the previous link to see an example). This same idea seemed like a good opportunity.\nCan we solve this using a Named Entity Recognition model? ‚Ä¶I don‚Äôt care if its not the best approach\nLets try to write a CLI program that can take a help message from another CLI program, and find the different elements or entities (commands, arguments and options) which conform it. It turns out that in around 200 lines of code, we can have a promising first version üòÑ. Of course, this is not that simple, but with spaCy it feels like it üëå.\nEnter helpner Lets see how helpner works. The installation consists of two steps. First, install using pip as usual preferably inside a venv. (It should be possible to install it using pipx, but I haven‚Äôt tried it yet):\n$ pip install helpner This should have downloaded the library, but as of this moment its incomplete, we still have to download the model itself. For this, a handy command is supplied (visit the README.md for more information):\n$ helpner download This two step process should be familiar for those who have already used spaCy. By using this approach it allows to split the development of the model from the use we make of it. We could update the model in any way (we could for example retrain the model with different data, or modify the optimizer used), and we would only need to update the model (running again the download command). It applies the same for the library, we could add more functionality without changing the inner model.\nWe are already in position to use helpner üí•, lets see one of the examples from the docs, how to highlight the entities of a help message (this was the first use that came to mind):\nflit install --help | helpner highlight For those who don‚Äôt know flit, its a command line program that simplifies packaging python modules. The example shows the help message of one of its subcommands, flit install. From the legend we see that the possible elements or entities are CMD (commands or subcommands, which in this case depend on flit directly), ARG (positional arguments, which in this case don‚Äôt exist) and OPT (optional arguments, which correspond to all the elements preceded by a single or double dash, are correctly predicted). But it calls the attention some random words highlighted as if they were CMD entities, which are clearly misplaced. It is far from perfect, but I consider it a success anyway, the results seem promising enough!\nWhat happens underneath? what we did was send the help message to the spaCy model, and get the predictions:\n‚ùØ flit install --help | helpner parse --no-json { 'install': ('CMD', 12, 19), '[-h]': ('OPT', 20, 24), '[-s]': ('OPT', 25, 29), '[--pth-file]': ('OPT', 30, 42), '[--user]': ('OPT', 43, 51), '[--env]': ('OPT', 52, 59), '[--python PYTHON]': ('OPT', 60, 77), '[--deps {all,production,develop,none}]': ('OPT', 98, 136), '[--only-deps]': ('OPT', 137, 150), '[--extras EXTRAS]': ('OPT', 171, 188), '-h, --help': ('OPT', 201, 211), 'exit': ('CMD', 250, 254), '-s, --symlink': ('OPT', 257, 270), 'package': ('CMD', 298, 305), '--pth-file': ('OPT', 373, 383), 'module': ('CMD', 417, 423), '/': ('CMD', 423, 424), '--user': ('OPT', 497, 503), 'local': ('CMD', 529, 534), '--env': ('OPT', 612, 617), '--python PYTHON': ('OPT', 749, 764), '--deps {all,production,develop,none}': ('OPT', 862, 898), '--only-deps': ('OPT', 1074, 1085), '--extras EXTRAS': ('OPT', 1192, 1207), 'the': ('CMD', 1313, 1316), 'ones': ('CMD', 1317, 1321), 'implied': ('CMD', 1322, 1329), 'by': ('CMD', 1330, 1332), 'be': ('CMD', 1382, 1384), 'useful': ('CMD', 1385, 1391) } This output has all the necessary information to inform rich. The keys in the dict correspond to the elements found/predicted, and the values contain the entity, start and end position of the substrings. With this information, we can make use of rich to add some color to the console.\nOf course, there are multiple errors (and this is an example that seems relatively right), the model cannot be better than the data it was fed with. In a posterior post we will see how the data powering this model is obtained.\n","wordCount":"865","inLanguage":"en","datePublished":"2023-02-21T18:55:27+01:00","dateModified":"2023-02-21T18:55:27+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://plaguss.github.io/blog/a-ner-model-for-command-line-help-messages-part1/"},"publisher":{"@type":"Organization","name":"Agus site","logo":{"@type":"ImageObject","url":"https://plaguss.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://plaguss.github.io/ accesskey=h title="Agus site (Alt + H)">Agus site</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://plaguss.github.io/es/ title=Espa√±ol aria-label=Espa√±ol>Es</a></li></ul></div></div><ul id=menu><li><a href=https://plaguss.github.io/ title=Blog><span>Blog</span></a></li><li><a href=https://plaguss.github.io/home/ title=Home><span>Home</span></a></li><li><a href=https://plaguss.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://plaguss.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>A NER Model for Command Line Help Messages (Part 1: The command line program)</h1><div class=post-meta><span title='2023-02-21 18:55:27 +0100 +0100'>February 21, 2023</span>&nbsp;¬∑&nbsp;5 min&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://plaguss.github.io/es/blog/a-ner-model-for-command-line-help-messages-part1/>Es</a></li></ul></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-led-me-to-start-this-project aria-label="What led me to start this project?">What led me to start this project?</a></li><li><a href=#enter-helpner aria-label="Enter helpner">Enter helpner</a></li></ul></div></details></div><div class=post-content><p>In this 3 part series I will tell the journey of creating a program to detect the different
components/entities of a command line program&rsquo;s help message. This post will start by looking at the final
product <a href=https://github.com/plaguss/helpner>helpner</a>, a python program that can be installed
from <a href=https://pypi.org/project/helpner/>PyPI</a>, the second will tell about the spaCy NLP workflow
and finally we will take a look at the data that feeds spaCy&rsquo;s final model.</p><blockquote><p><em>The post assumes some python knowledge, like how to install a library from PyPI,</em>
<em>and some familiarity with spaCy.</em></p></blockquote><p>The following figure shows the architecture of helpner, each piece is represented by a different
github repository. Highlighted in yellow at the bottom its the piece corresponding to
<a href=https://github.com/plaguss/helpner>helpner</a>.</p><p><img loading=lazy src=/images/helpner-arch-part1.png alt=helpner></p><h3 id=what-led-me-to-start-this-project>What led me to start this project?<a hidden class=anchor aria-hidden=true href=#what-led-me-to-start-this-project>#</a></h3><p>I wanted an NLP project to put into practice the spaCy facilities. If possible, the
model should be ready to use by an end user without developing a website for it
for simplicity. Independently, I found <a href=http://docopt.org/>docopt</a> by chance exploring
python CLI libraries. As it turns out, this library, and its maintained fork (<a href=https://github.com/jazzband/docopt-ng>docopt-ng</a>)
can generate a CLI program by parsing a &ldquo;properly written&rdquo; help message (visit the previous
link to see an example). This same idea seemed like a good opportunity.</p><blockquote><p>Can we solve this using a <a href=https://spacy.io/usage/linguistic-features#named-entities>Named Entity Recognition</a> model? <em>&mldr;I don&rsquo;t care if its not the best approach</em></p></blockquote><p>Lets try to write a CLI program that can take a help message from another
CLI program, and find the different elements or entities (<code>commands</code>, <code>arguments</code> and <code>options</code>)
which conform it. It turns out that in around 200 lines of code, we can have a promising
first version üòÑ. Of course, this is not that simple, but with spaCy it feels like it üëå.</p><h3 id=enter-helpner>Enter helpner<a hidden class=anchor aria-hidden=true href=#enter-helpner>#</a></h3><p>Lets see how <a href=https://github.com/plaguss/helpner>helpner</a> works.
The installation consists of two steps. First, install using <em>pip</em> as usual
preferably inside a venv. (It should be possible to install it using
<a href=https://pypa.github.io/pipx/>pipx</a>, but I haven&rsquo;t tried it yet):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> pip install helpner
</span></span></code></pre></div><p>This should have downloaded the library, but as of this moment its incomplete,
we still have to download the model itself. For this, a handy command is supplied
(visit the README.md for more information):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=gp>$</span> helpner download
</span></span></code></pre></div><p>This two step process should be familiar for those who have already used <a href=https://spacy.io/>spaCy</a>. By using
this approach it allows to split the development of the model from the use we make of
it. We could update the model in any way (we could for example retrain the model with different
data, or modify the optimizer used), and we would only need to update the model (running again the download command). It applies
the same for the library, we could add more functionality without changing the inner model.</p><p>We are already in position to use <em>helpner</em> üí•, lets see one of the examples
from the docs, how to highlight the entities of a help message (this was the first use that came to mind):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>flit install --help <span class=p>|</span> helpner highlight
</span></span></code></pre></div><p><img loading=lazy src=/images/flit-install-help.svg alt=flit-install-help></p><p>For those who don&rsquo;t know <a href=https://github.com/pypa/flit>flit</a>, its a command line program that
simplifies packaging python modules. The example shows the help message of one of its subcommands,
<code>flit install</code>. From the legend we see that the possible elements or entities are CMD (commands
or subcommands, which in this case depend on <code>flit</code> directly), <code>ARG</code> (positional arguments,
which in this case don&rsquo;t exist) and <code>OPT</code> (optional arguments, which correspond to all the elements
preceded by a single or double dash, are correctly predicted). But it calls the attention some
random words highlighted as if they were <code>CMD</code> entities, which are clearly misplaced. It is far from
perfect, but I consider it a success anyway, the results seem promising enough!</p><p>What happens underneath? what we did was send the help message to the <em>spaCy</em> model,
and get the predictions:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-console data-lang=console><span class=line><span class=cl><span class=go>‚ùØ flit install --help | helpner parse --no-json
</span></span></span><span class=line><span class=cl><span class=go>{
</span></span></span><span class=line><span class=cl><span class=go>    &#39;install&#39;: (&#39;CMD&#39;, 12, 19),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[-h]&#39;: (&#39;OPT&#39;, 20, 24),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[-s]&#39;: (&#39;OPT&#39;, 25, 29),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[--pth-file]&#39;: (&#39;OPT&#39;, 30, 42),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[--user]&#39;: (&#39;OPT&#39;, 43, 51),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[--env]&#39;: (&#39;OPT&#39;, 52, 59),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[--python PYTHON]&#39;: (&#39;OPT&#39;, 60, 77),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[--deps {all,production,develop,none}]&#39;: (&#39;OPT&#39;, 98, 136),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[--only-deps]&#39;: (&#39;OPT&#39;, 137, 150),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;[--extras EXTRAS]&#39;: (&#39;OPT&#39;, 171, 188),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;-h, --help&#39;: (&#39;OPT&#39;, 201, 211),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;exit&#39;: (&#39;CMD&#39;, 250, 254),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;-s, --symlink&#39;: (&#39;OPT&#39;, 257, 270),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;package&#39;: (&#39;CMD&#39;, 298, 305),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;--pth-file&#39;: (&#39;OPT&#39;, 373, 383),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;module&#39;: (&#39;CMD&#39;, 417, 423),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;/&#39;: (&#39;CMD&#39;, 423, 424),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;--user&#39;: (&#39;OPT&#39;, 497, 503),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;local&#39;: (&#39;CMD&#39;, 529, 534),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;--env&#39;: (&#39;OPT&#39;, 612, 617),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;--python PYTHON&#39;: (&#39;OPT&#39;, 749, 764),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;--deps {all,production,develop,none}&#39;: (&#39;OPT&#39;, 862, 898),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;--only-deps&#39;: (&#39;OPT&#39;, 1074, 1085),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;--extras EXTRAS&#39;: (&#39;OPT&#39;, 1192, 1207),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;the&#39;: (&#39;CMD&#39;, 1313, 1316),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;ones&#39;: (&#39;CMD&#39;, 1317, 1321),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;implied&#39;: (&#39;CMD&#39;, 1322, 1329),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;by&#39;: (&#39;CMD&#39;, 1330, 1332),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;be&#39;: (&#39;CMD&#39;, 1382, 1384),
</span></span></span><span class=line><span class=cl><span class=go>    &#39;useful&#39;: (&#39;CMD&#39;, 1385, 1391)
</span></span></span><span class=line><span class=cl><span class=go>}
</span></span></span></code></pre></div><p>This output has all the necessary information to inform <code>rich</code>. The keys in the dict
correspond to the elements found/predicted, and the values contain the entity, start
and end position of the substrings. With this information, we can make use of
<a href=https://rich.readthedocs.io/en/stable/introduction.html>rich</a> to add some color to the console.</p><p>Of course, there are multiple errors (and this is an example that seems relatively
right), the model cannot be better than the data it was fed with. In a posterior post
we will see how the data powering this model is obtained.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://plaguss.github.io/tags/nlp/>NLP</a></li><li><a href=https://plaguss.github.io/tags/ner/>NER</a></li><li><a href=https://plaguss.github.io/tags/spacy/>spaCy</a></li><li><a href=https://plaguss.github.io/tags/python/>Python</a></li><li><a href=https://plaguss.github.io/tags/rich/>rich</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://plaguss.github.io/>Agus site</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>